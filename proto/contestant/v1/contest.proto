syntax = "proto3";

package contestant.v1;

import "google/protobuf/timestamp.proto";

option go_package = "github.com/ictsc/ictsc-regalia/backend/pkg/proto/contestant/v1;contestantv1";

// スケジュールエントリ
message ScheduleEntry {
  // スケジュール名(例: "day1-am")
  string name = 2;
  google.protobuf.Timestamp start_at = 3;
  google.protobuf.Timestamp end_at = 4;
}

// 現在のコンテスト状態
message Schedule {
  // コンテストが開始済みか（一度でもスケジュールが開始されたか）
  bool has_started = 2;
  // 現在アクティブなスケジュール（なければ空）
  optional ScheduleEntry current = 3;
  // 次のスケジュール（なければ空）
  optional ScheduleEntry next = 4;
}

message Rule {
  string markdown = 1;
}

message GetScheduleRequest {}
message GetScheduleResponse {
  Schedule schedule = 1;
}

message GetRuleRequest {}
message GetRuleResponse {
  Rule rule = 1;
}

service ContestService {
  rpc GetSchedule(GetScheduleRequest) returns (GetScheduleResponse);
  rpc GetRule(GetRuleRequest) returns (GetRuleResponse);
}
